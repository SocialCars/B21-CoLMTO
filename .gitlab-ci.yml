image: socialcars/docker:colmto

test:
  script:
  - python3 setup.py test
  only:
  - master
  - develop

run:
  script:
  - pip3 install wheel
  - python3 setup.py bdist_wheel
  artifacts:
    paths:
      - dist/*.whl
  only:
  - master

pages:
  script:
  - pip3 install sphinx sphinx-rtd-theme
  - cd docs ; make html ; make latexpdf
  - mv build/html/ ../public/
  - mv build/latex/CoLMTO-doc.pdf ../public/
  artifacts:
    paths:
    - public
  only:
  - master
